<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html"/>
<link rel="import" href="../../bower_components/paper-button/paper-button.html" />
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html" />
<link rel="import" href="../../bower_components/iron-a11y-keys/iron-a11y-keys.html" />
<link rel="import" href="../../components/pd-page-dialog/pd-page-dialog.html">
<link rel="import" href="../../components/pd-card/pd-card.html" />
<link rel="import" href="../../components/pd-repo/pd-repo-auth.html" />
<link rel="import" href="../../components/pd-data/pd-data.html" />

<dom-module id="auth-dialog">
    <template>
        <link rel="stylesheet" href="../../css/main.css" />
        <link rel="stylesheet" href="../../css/position.css" />
        <link rel="stylesheet" href="../../css/skins/default/colors.css" />
        <link rel="stylesheet" href="auth.css" />
        <iron-a11y-keys target="{{dialog}}" keys="enter" on-keys-pressed="login"></iron-a11y-keys>
        <pd-repo-auth id="repo"></pd-repo-auth>
        <pd-page-dialog id="dialog">
            <div head class="t-center">
                <img style="height:4em" src="../../images/LogoSymbolInverse.gif" />
                <img style="height:4em" src="../../images/LogoTextInverse.gif" />
            </div>
            <div body class="p-t-2">
                <paper-input no-label-float label="Username" value="{{user.username}}"></paper-input>
                <paper-input no-label-float label="Password" type="password" value="{{user.password}}"></paper-input>
                <paper-checkbox class="f-left remember-me" on-click=""></paper-checkbox><div class="f-left p-l-0-5 remember-me-txt">Remember me</div>
                <paper-button on-click="login" tabindex="0" class="c-p f-right login-btn">Login</paper-button>
            </div>
        </pd-page-dialog>
    </template>
</dom-module>

<script>
  Polymer({
      is: "auth-dialog",
        properties: {
            user:{
                type: Object,
                value: {
                    username: "",
                    password: ""
                },
                notify:true
            }
        },
        ready: function(){

        },
        login: function(){
            this.$.repo.login(this.user, this.loginCallback, this);
        },
        loginCallback:function(response, self){
            if(response.success){
                window.location.href = "/";
            }
        }
  });
</script>